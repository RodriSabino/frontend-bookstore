<div class="container-fluid d-flex flex-column h-100">
    <!-- Navbar -->
    <app-navbar></app-navbar>

    <!-- Contenido principal -->
    <div class="flex-grow-1 overflow-hidden">
        <div class="row h-100">
            <!-- Sección de libros con scroll -->
            <div class="col-md-8 h-100 overflow-auto pe-0">
                <router-outlet></router-outlet>
            </div>

            <!-- Carrito fijo sin scroll -->
            <div class="col-md-4 bg-white border-start h-100 pe-4">
                <app-cart-panel></app-cart-panel>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Datos del Cliente -->
<div class="modal fade" id="checkoutModal" tabindex="-1" aria-labelledby="checkoutModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="checkoutModalLabel">Datos del Cliente</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                <!-- Aquí va el componente del formulario -->
                <app-checkout-form (purchaseConfirmed)="handlePurchaseConfirmed()"></app-checkout-form>
            </div>
            <div class="modal-footer">
                <!-- Este botón NO está dentro del componente, pero sí dentro del modal -->
                <button type="button" class="btn btn-success" (click)="confirmPurchase()">
                    Confirmar Compra
                </button>
            </div>
        </div>
    </div>
</div>
<!-- ✅ Bootstrap Toast de confirmación -->
<div class="toast-container position-fixed bottom-0 end-0 p-3" style="z-index: 9999;">
    <div class="toast align-items-center text-bg-success border-0" id="purchaseToast" role="alert" aria-live="assertive"
        aria-atomic="true">
        <div class="d-flex">
            <div class="toast-body">
                ✅ Compra confirmada con éxito.
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                aria-label="Cerrar"></button>
        </div>
    </div>
</div>